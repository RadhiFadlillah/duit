import{Button,LoadingSign}from"./_components.min.js";import{Big}from"../libs/big.min.js";import{mergeObject}from"../libs/utils.min.js";import{i18n,formatNumber}from"../i18n/i18n.min.js";export function AccountList(){let t=0;function n(n,e){let c=n.indexOf(e);-1!==c?n.splice(c,1):n.push(e),t=e}function e(n,e){let c=t,o=e;c>o&&(c=e,o=t);for(var i=c;i<=o;i++)-1===n.indexOf(i)&&n.push(i);t=e}return{view:function(t){let c=t.attrs.accounts,o=t.attrs.loading,i=t.attrs.class,a=t.attrs.selection,l=t.attrs.onItemClicked,s=t.attrs.onNewClicked,u=t.attrs.onEditClicked,r=t.attrs.onDeleteClicked;Array.isArray(c)||(c=[]),"boolean"!=typeof o&&(o=!1),"string"!=typeof i&&(i=""),Array.isArray(a)||(a=[]),"function"!=typeof l&&(l=()=>{}),"function"!=typeof s&&(s=()=>{}),"function"!=typeof u&&(u=()=>{}),"function"!=typeof r&&(r=()=>{});let p=c.reduce((t,n)=>t.plus(Number(n.total)),Big(0)),f=i18n("Account List");c.length>0&&(f=`Total ${formatNumber(p)}`);let h=[m("p.account-list__header__title",f)],d={iconOnly:!0,class:"account-list__header__button"};c.length>0&&!o&&h.unshift(m("input[type=checkbox].account__check",{checked:a.length===c.length,onclick(){!function(t,n){if(t.length===n)t.splice(0,t.length);else for(var e=0;e<n;e++)-1===t.indexOf(e)&&t.push(e)}(a,c.length)}})),1===a.length&&h.push(m(Button,mergeObject(d,{icon:"fa-pen",caption:i18n("Edit account"),onclick(){u()}}))),a.length>=1&&h.push(m(Button,mergeObject(d,{icon:"fa-trash-alt",caption:i18n("Delete account"),onclick(){r()}}))),h.push(m(Button,mergeObject(d,{icon:"fa-plus-circle",caption:i18n("New account"),onclick(){s()}})));let g=m(".account-list__header",h),_=[];o?_.push(m(LoadingSign,{class:"account-list__loading-sign"})):0===c.length?_.push(m("p.account-list__empty-message",i18n("No accounts registered"))):_=c.map((t,c)=>{let o={checked:-1!==a.indexOf(c),onclick(t){t.shiftKey?e(a,c):n(a,c)},onkeydown(t){"Enter"!==t.code&&"NumpadEnter"!==t.code||(t.shiftKey?e(a,c):n(a,c))}};return m(".account",m("input[type=checkbox].account__check",o),m(".account__data",{onclick(){l(t)}},m("p.account__name",t.name),m("p.account__amount",formatNumber(t.total))))});let y=m(".account-list__body",_);return m(".account-list",{class:i},g,y)}}}