import{Button,LoadingSign}from"./_components.min.js";import{Big}from"../libs/big.min.js";import{mergeObject,formatNumber}from"../libs/utils.min.js";export function AccountList(){let t=0;function e(e,n){let c=e.indexOf(n);-1!==c?e.splice(c,1):e.push(n),t=n}function n(e,n){let c=t,o=n;c>o&&(c=n,o=t);for(var i=c;i<=o;i++)-1===e.indexOf(i)&&e.push(i);t=n}return{view:function(t){let c=t.attrs.accounts,o=t.attrs.loading,i=t.attrs.class,a=t.attrs.selection,l=t.attrs.onItemClicked,u=t.attrs.onNewClicked,r=t.attrs.onEditClicked,s=t.attrs.onDeleteClicked;Array.isArray(c)||(c=[]),"boolean"!=typeof o&&(o=!1),"string"!=typeof i&&(i=""),Array.isArray(a)||(a=[]),"function"!=typeof l&&(l=()=>{}),"function"!=typeof u&&(u=()=>{}),"function"!=typeof r&&(r=()=>{}),"function"!=typeof s&&(s=()=>{});let f=c.reduce((t,e)=>t.plus(Number(e.total)),Big(0)),p="Daftar Akun";c.length>0&&(p=`Total ${formatNumber(f)}`);let h=[],d={iconOnly:!0,class:"account-list__header__button"};1===a.length&&h.unshift(m(Button,mergeObject(d,{icon:"fa-pen",caption:"Edit akun",onclick(){r()}}))),a.length>=1&&h.unshift(m(Button,mergeObject(d,{icon:"fa-trash-alt",caption:"Delete akun",onclick(){s()}}))),h.push(m(Button,mergeObject(d,{icon:"fa-plus-circle",caption:"Akun baru",onclick(){u()}})));let g=m(".account-list__header",m("input[type=checkbox].account__check",{checked:a.length===c.length,onclick(){!function(t,e){if(t.length===e)t.splice(0,t.length);else for(var n=0;n<e;n++)-1===t.indexOf(n)&&t.push(n)}(a,c.length)}}),m("p.account-list__header__title",p),...h),_=[];return o?_.push(m(LoadingSign,{class:"account-list__loading-sign"})):0===c.length?_.push(m("p.account-list__empty-message","Belum ada akun terdaftar")):_=c.map((t,c)=>{let o={checked:-1!==a.indexOf(c),onclick(t){t.shiftKey?n(a,c):e(a,c)},onkeydown(t){"Enter"!==t.code&&"NumpadEnter"!==t.code||(t.shiftKey?n(a,c):e(a,c))}};return m(".account",m("input[type=checkbox].account__check",o),m(".account__data",{onclick(){l(t)}},m("p.account__name",t.name),m("p.account__amount",formatNumber(t.total))))}),m(".account-list",{class:i},[g,_])}}}