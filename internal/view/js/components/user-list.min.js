import{Button,LoadingSign}from"./_components.min.js";import{mergeObject}from"../libs/utils.min.js";export function UserList(){let e=0;function t(t,n){let s=t.indexOf(n);-1!==s?t.splice(s,1):t.push(n),e=n}function n(t,n){let s=e,r=n;s>r&&(s=n,r=e);for(var i=s;i<=r;i++)-1===t.indexOf(i)&&t.push(i);e=n}return{view:function(e){let s=e.attrs.users,r=e.attrs.loading,i=e.attrs.class,c=e.attrs.selection,o=e.attrs.onNewClicked,l=e.attrs.onEditClicked,u=e.attrs.onResetClicked,a=e.attrs.onDeleteClicked;Array.isArray(s)||(s=[]),"boolean"!=typeof r&&(r=!1),"string"!=typeof i&&(i=""),Array.isArray(c)||(c=[]),"function"!=typeof o&&(o=()=>{}),"function"!=typeof l&&(l=()=>{}),"function"!=typeof u&&(u=()=>{}),"function"!=typeof a&&(a=()=>{});let p=[m("p.user-list__header__title","Daftar User")],f={iconOnly:!0,class:"user-list__header__button"};s.length>0&&!r&&p.unshift(m("input[type=checkbox].user__check",{checked:c.length===s.length,onclick(){!function(e,t){if(e.length===t)e.splice(0,e.length);else for(var n=0;n<t;n++)-1===e.indexOf(n)&&e.push(n)}(c,s.length)}})),1===c.length&&p.push(m(Button,mergeObject(f,{icon:"fa-pen",caption:"Edit user",onclick(){l()}}))),1===c.length&&p.push(m(Button,mergeObject(f,{icon:"fa-key",caption:"Reset password user",onclick(){u()}}))),c.length>=1&&p.push(m(Button,mergeObject(f,{icon:"fa-trash-alt",caption:"Delete user",onclick(){a()}}))),p.push(m(Button,mergeObject(f,{icon:"fa-plus-circle",caption:"User baru",onclick(){o()}})));let h=m(".user-list__header",p),d=[];return r?d.push(m(LoadingSign,{class:"user-list__loading-sign"})):0===s.length?d.push(m("p.user-list__empty-message","Belum ada user terdaftar")):d=s.map((e,s)=>{let r={checked:-1!==c.indexOf(s),onclick(e){e.shiftKey?n(c,s):t(c,s)},onkeydown(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.shiftKey?n(c,s):t(c,s))}};return m(".user",m("input[type=checkbox].user__check",r),m(".user__data",m("p.user__name",e.name),m("p.user__username",e.username)))}),m(".user-list",{class:i},[h,d])}}}