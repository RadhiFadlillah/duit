export function timeout(e,t){let r=e;if("string"==typeof e){let t=e.replace(/^\d+/,"");switch(r=parseInt(e,10),t){case"s":r*=1e3;break;case"M":r*=6e4;break;case"H":r*=36e5;break;default:r=0}}return 0===r?t:new Promise((n,o)=>{setTimeout(()=>o(new Error(`Timeout after ${e}`)),r),t.then(n,o)})}export async function request(e,t,r){let n=fetch(e,r),o=await timeout(t,n);if(!o.ok){let e=await o.text();throw Error(`${e.trim()} (${o.status})`)}return"application/json"===o.headers.get("content-type")?await o.json():await o.text()}export function cloneObject(e){return JSON.parse(JSON.stringify(e))}export function getActiveUser(){let e=localStorage.getItem("user")||"null";return JSON.parse(e)}export function searchTree(e,t,r){if("object"!=typeof r&&(r=null),!Array.isArray(e)||0===e.length)return null;for(let n=0;n<e.length;n++){let o=e[n];if(o.value===t)return{data:o,parent:r};let a=searchTree(o.children,t,o);if(null!=a)return a}return null}export function debounce(e,t){let r;return function(){const n=()=>e.apply(this,arguments);clearTimeout(r),r=setTimeout(n,t)}}export function evalMath(e){if(""!==e)try{return Number(Function(`"use strict";return (${e})`)())}catch(e){return e.message}}export function copyToClipboard(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.opacity="0",t.style.maxWidth="0",t.style.maxHeight="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}export function mergeObject(e,t){let r=cloneObject(e);for(const e in t)r[e]=t[e];return r}