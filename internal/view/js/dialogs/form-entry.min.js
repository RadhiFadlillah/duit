import{DialogForm}from"./form.min.js";export function DialogFormEntry(){return{view:function(t){let e=t.attrs.title,a=t.attrs.loading,n=t.attrs.accounts,r=t.attrs.entryType,o=t.attrs.defaultValue,i=t.attrs.onAccepted,l=t.attrs.onRejected;"string"!=typeof e&&(e=""),"boolean"!=typeof a&&(a=!1),Array.isArray(n)||(n=[]),"number"!=typeof r&&(r=1),"object"!=typeof o&&(o={}),"function"!=typeof i&&(i=()=>{}),"function"!=typeof l&&(l=()=>{}),r=Math.floor(r),(r<1||r>3)&&(r=1);let c=[{name:"amount",label:"Jumlah",type:"float",min:0,required:!0},{name:"date",label:"Tanggal entri",type:"date",required:!0}];3!==r&&c.unshift({name:"description",label:"Deskripsi",required:!0}),3===r&&c.push({name:"affectedAccountId",label:"Tujuan",type:"select",required:!0,choices:n.map(t=>({caption:t.name,value:String(t.id)}))});let u=o.date;return null!=u&&""!==u||(o.date=function(t){let e=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0");return`${t.getFullYear()}-${a}-${e}`}(new Date)),c.forEach((t,e)=>{let a=t.name;c[e].value=o[a]||""}),m(DialogForm,{title:e,loading:a,fields:c,onRejected:l,onAccepted(t){t.type=r,t.affectedAccountId=parseInt(t.affectedAccountId,10),i(t)}})}}}